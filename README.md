# Банкролл-менеджер под лимиты Покердом

Скрипт **`bankroll.py`** — простой и удобный банкролл-менеджер для игроков Покердом. Помогает вести учёт банкролла и сессий, получать рекомендации по лимитам (Cash) или по среднему бай-ину (MTT) в соответствии с выбранной стратегией риск-менеджмента.

---

## Возможности

* ✅ **Учёт банкролла** (текущее значение рассчитывается из истории записей)
* ✅ **Добавление сессий** (прибыль/убыток, лимит или бай-ин, длительность, заметка)
* ✅ **Ручные корректировки** (депозит / кэшаут / бонус / другое)
* ✅ **Рекомендации по BRM**

  * **Cash:** рекомендуемый лимит (например `NL10`), пороги «вниз» и «шот вверх»
  * **MTT:** рекомендуемый **ABI** (Average Buy-In)
* ✅ **История операций** (последние N записей, фильтр по типу)
* ✅ **Отчёты за период** (день/неделя/месяц или диапазон дат)
* ✅ **Настройки профиля** (валюта, режим, стратегия, список лимитов)

> Скрипт **не взаимодействует** с клиентом Покердома, не перехватывает трафик и не автоматизирует игру. Это инструмент учёта и рекомендаций.

---

## Как это работает (логика BRM)

### Cash (кэш)

Для каждого лимита (например `NL10`) используется упрощённая модель:

* **BB = 10** (в валюте профиля)
* **Buy-in = 100 BB**
  Например, для `NL10` buy-in = `100 * 10 = 1000` (в выбранной валюте).

В зависимости от стратегии скрипт выбирает максимальный лимит, для которого банкролла хватает на нужное число buy-in’ов.

### MTT (турниры)

Рекомендуемый средний бай-ин считается как:

* `ABI <= bankroll / multiplier`
  где multiplier зависит от стратегии (например 200 для conservative).

---

## Требования

* Python **3.10+**

---

## Установка

Склонируйте репозиторий и перейдите в папку:

```bash
git clone https://github.com/Pokerdom-RU/Bankroll-Manager.git
cd Bankroll-Manager
```

---

## Быстрый старт

### 1) Инициализация профиля

Создаст файл данных `bankroll_data.json` рядом со скриптом:

```bash
python bankroll.py init
```

В процессе будут запрошены:

* валюта (`RUB`, `USD`, `EUR`)
* режим (`cash` / `mtt`)
* стратегия (`aggressive` / `standard` / `conservative`)
* стартовый банкролл

### 2) Проверка статуса и рекомендаций

```bash
python bankroll.py status
```

Пример (Cash):

```
Pokerdom Bankroll Manager
----------------------------
Room: Pokerdom

Bankroll: 1 800.00 RUB
Mode: cash | Strategy: standard

Recommended limit: NL10
Move down if bankroll < 2 500.00 RUB -> NL5
Next shot at bankroll >= 8 750.00 RUB -> NL25
```

---

## Команды

### `status`

Показывает текущий банкролл, режим, стратегию, рекомендации и краткую статистику за последние 7 дней.

```bash
python bankroll.py status
```

---

### `add-session`

Добавить сессию (profit/loss). Для Cash просит лимит (например `NL10`), для MTT — бай-ин.

```bash
python bankroll.py add-session
```

Опционально можно переопределить тип записи:

```bash
python bankroll.py add-session --game cash
python bankroll.py add-session --game mtt
```

---

### `add`

Ручная корректировка банкролла: депозит, кэшаут, бонус и т.д.

```bash
python bankroll.py add
```

---

### `history`

Показать историю (по умолчанию последние 10 записей):

```bash
python bankroll.py history
```

Показать больше:

```bash
python bankroll.py history --n 30
```

Фильтр по типу:

```bash
python bankroll.py history --type session
python bankroll.py history --type adjustment
```

---

### `report`

Отчёт по сессиям за период.

По умолчанию — последние 7 дней (включая сегодня):

```bash
python bankroll.py report
```

Быстрые периоды:

```bash
python bankroll.py report --period today
python bankroll.py report --period week
python bankroll.py report --period month
```

Произвольный диапазон:

```bash
python bankroll.py report --from 2026-01-01 --to 2026-01-31
```

В отчёте:

* число сессий
* суммарный профит
* средний профит на сессию
* топ-3 лучших и худших сессий

---

### `config`

Показать настройки:

```bash
python bankroll.py config --show
```

Интерактивно изменить настройки:

```bash
python bankroll.py config
```

Можно менять:

* валюту
* режим (`cash` / `mtt`)
* стратегию
* список лимитов для Cash (например `2,5,10,25,50`)

---

## Стратегии (по умолчанию)

### Cash

| Стратегия    | Buy-ins на лимит | Порог “вниз” (buy-ins) |
| ------------ | ---------------: | ---------------------: |
| aggressive   |               25 |                     20 |
| standard     |               35 |                     25 |
| conservative |               50 |                     40 |

### MTT

| Стратегия    | Множитель ABI |
| ------------ | ------------: |
| aggressive   |           100 |
| standard     |           150 |
| conservative |           200 |

---

## Файл данных: `bankroll_data.json`

Скрипт хранит данные в одном JSON-файле рядом со скриптом.
Текущее значение банкролла **пересчитывается** из истории (`ledger`), чтобы избежать накопления ошибок.

Типы записей:

* `session` — покерная сессия (`profit`, `limit` или `buyin`, `duration_min`, `note`)
* `adjustment` — корректировка (`amount`, `category`, `note`)

---

## Примеры сценариев использования

### Вести банкролл в Cash и контролировать лимиты

1. `init` → выбрать `cash` и стратегию
2. После каждой игры: `add-session`
3. Перед игрой: `status` (посмотреть рекомендованный лимит и пороги)

### Играть турниры и держать ABI под контролем

1. `init` → выбрать `mtt`
2. Добавлять сессии по итогам дня/серии
3. Смотреть `status` → рекомендованный ABI

---

## Безопасность и соответствие правилам

Скрипт предназначен для учёта и рекомендаций. Он:

* не читает окна/память клиента,
* не парсит сетевой трафик,
* не выполняет автоматизацию действий в клиенте,
* не даёт подсказок в реальном времени по игре.

---

## Лицензия

Проект распространяется по лицензии **MIT**. См. файл `LICENSE`.
